CHECK Constraint

CHECK constraint allows us to create more customized constraints that adhere to a certain condition.

Such as making sure all inserted integer values fall below a certain threshold.

General Syntax

CREATE TABLE example(
ex_id SERIAL PRIMARY KEY,
age SMALLINT CHECK(age > 21),
parent_age SMALLINT CHECK(parent_age > age)
);


Here the we have set constraint for a column with number and constraint based on another column.



Example

CREATE TABLE employees(
emp_id SERIAL PRIMARY KEY,
first_name VARCHAR(50) NOT NULL,
last_name VARCHAR(50) NOT NULL,
birth_date DATE CHECK(birth_date > '1900-01-01'),
hire_date DATE CHECK(hire_date > birth_date),
salary INTEGER CHECK (salary > 0)
)

Following insert command will throw an error

INSERT INTO employees (first_name,last_name,birth_date,hire_date,salary)
VALUES('jagan','dhandapani','1891-06-01','2013-02-13',100)



ERROR:  new row for relation "employees" violates check constraint "employees_birth_date_check"
DETAIL:  Failing row contains (1, jagan, dhandapani, 1891-06-01, 2013-02-13, 100).
SQL state: 23514


INSERT INTO employees (first_name,last_name,birth_date,hire_date,salary)
VALUES('jagan','dhandapani','1991-06-01','2013-02-13',100)


Note that SERIAL will keep the count of failed attempt. 
So we can conclude that the rows were either removed or INSERT command failed in case the serial is not in order. 